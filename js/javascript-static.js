function checkall(){throw new Error("checkall can not be used any more. Please use jQuery instead.")}function checknone(){throw new Error("checknone can not be used any more. Please use jQuery instead.")}function select_all_in_element_with_id(e,t){throw new Error("select_all_in_element_with_id can not be used any more. Please use jQuery instead.")}function select_all_in(e,t,n){throw new Error("select_all_in can not be used any more. Please use jQuery instead.")}function deselect_all_in(e,t,n){throw new Error("deselect_all_in can not be used any more. Please use jQuery instead.")}function confirm_if(e,t){throw new Error("confirm_if can not be used any more.")}function findParentNode(e,t,n,i){throw new Error("findParentNode can not be used any more. Please use jQuery instead.")}function unmaskPassword(e){var t=document.getElementById(e),n=document.getElementById(e+"unmask");if(0==Y.UA.ie||Y.UA.ie>=9)n.checked?t.type="text":t.type="password";else{try{if(n.checked)var i=document.createElement('<input type="text" autocomplete="off" name="'+t.name+'">');else i=document.createElement('<input type="password" autocomplete="off" name="'+t.name+'">');i.attributes.class.nodeValue=t.attributes.class.nodeValue}catch(e){(i=document.createElement("input")).setAttribute("autocomplete","off"),i.setAttribute("name",t.name),n.checked?i.setAttribute("type","text"):i.setAttribute("type","password"),i.setAttribute("class",t.getAttribute("class"))}i.id=t.id,i.size=t.size,i.onblur=t.onblur,i.onchange=t.onchange,i.value=t.value,t.parentNode.replaceChild(i,t)}}function filterByParent(e,t){throw new Error("filterByParent can not be used any more. Please use jQuery instead.")}function fix_column_widths(){Y.log("fix_column_widths() no longer does anything. Please remove it from your code.","warn","javascript-static.js")}function fix_column_width(e){Y.log("fix_column_width() no longer does anything. Please remove it from your code.","warn","javascript-static.js")}function insertAtCursor(e,t){if(document.selection)e.focus(),sel=document.selection.createRange(),sel.text=t;else if(e.selectionStart||"0"==e.selectionStart){var n=e.selectionStart,i=e.selectionEnd;e.value=e.value.substring(0,n)+t+e.value.substring(i,e.value.length)}else e.value+=t}function increment_filename(e,t){var n="",i=e;if(!t){var o=e.lastIndexOf(".");-1!==o&&(i=e.substr(0,o),n=e.substr(o,e.length))}var r=0,s=i.match(/^(.*) \((\d+)\)$/);return null!==s&&(r=parseInt(s[2],10),i=s[1]),i+" ("+ ++r+")"+n}function right_to_left(){var e=Y.one("body"),t=!1;return e&&e.hasClass("dir-rtl")&&(t=!0),t}function openpopup(e,t){e&&(e.preventDefault?e.preventDefault():e.returnValue=!1);var n=/[^a-z0-9_]/i;"string"!=typeof t.name?t.name="_blank":t.name.match(n)&&(M.cfg.developerdebug&&alert("DEVELOPER NOTICE: Invalid 'name' passed to openpopup(): "+t.name),t.name=t.name.replace(n,"_"));var i=t.url;t.url.match(/https?:\/\//)||(i=M.cfg.wwwroot+t.url),t.fullscreen&&(t.options=t.options.replace(/top=\d+/,"top=0").replace(/left=\d+/,"left=0").replace(/width=\d+/,"width="+screen.availWidth).replace(/height=\d+/,"height="+screen.availHeight));var o=window.open(i,t.name,t.options);if(!o)return!0;if(t.fullscreen){var r=100,s=function(){o.moveTo(0,0),o.resizeTo(screen.availWidth,screen.availHeight),r>0&&(o.innerHeight<10||o.innerWidth<10)&&(r-=1,setTimeout(s,10))};setTimeout(s,0)}return o.focus(),!1}function close_window(e){e.preventDefault?e.preventDefault():e.returnValue=!1,window.close()}function focuscontrol(e){var t=document.getElementById(e);t&&t.focus()}function old_onload_focus(e,t){document.forms[e]&&document.forms[e].elements&&document.forms[e].elements[t]&&document.forms[e].elements[t].focus()}function build_querystring(e){return convert_object_to_string(e,"&")}function build_windowoptionsstring(e){return convert_object_to_string(e,",")}function convert_object_to_string(e,t){if("object"!=typeof e)return null;var n=[];for(var i in e){var o=e[i=encodeURIComponent(i)];if(e[i]instanceof Array)for(var r in o)n.push(i+"[]="+encodeURIComponent(o[r]));else n.push(i+"="+encodeURIComponent(o))}return n.join(t)}function stripHTML(e){throw new Error("stripHTML can not be used any more. Please use jQuery instead.")}function updateProgressBar(e,t,n,i){var o,r=document.getElementById(e),s={};if(r){s.message=n,s.percent=t,s.estimate=i;try{o=new CustomEvent("update",{bubbles:!1,cancelable:!0,detail:s})}catch(e){if(!(e instanceof TypeError))throw e;(o=document.createEvent("CustomEvent")).initCustomEvent("update",!1,!0,s),o.prototype=window.Event.prototype}r.dispatchEvent(o)}}M.yui.add_module=function(e){for(var t in e)YUI_config.modules[t]=e[t];Y.applyConfig(YUI_config)},M.yui.galleryversion="2010.04.21-21-51",M.util=M.util||{},M.str=M.str||{},M.util.image_url=function(e,t){t&&""!=t&&"moodle"!=t&&"core"!=t||(t="core");var n=M.cfg.wwwroot+"/theme/image.php";return M.cfg.themerev>0&&1==M.cfg.slasharguments?(M.cfg.svgicons||(n+="/_s"),n+="/"+M.cfg.theme+"/"+t+"/"+M.cfg.themerev+"/"+e):(n+="?theme="+M.cfg.theme+"&component="+t+"&rev="+M.cfg.themerev+"&image="+e,M.cfg.svgicons||(n+="&svg=0")),n},M.util.in_array=function(e,t){for(var n=0;n<t.length;n++)if(e==t[n])return!0;return!1},M.util.init_collapsible_region=function(e,t,n,i){e.use("anim",(function(e){new M.util.CollapsibleRegion(e,t,n,i)}))},M.util.CollapsibleRegion=function(e,t,n,i){this.userpref=n,this.div=e.one("#"+t);var o=this.div.one("#"+t+"_caption"),r=e.Node.create('<a href="#"></a>');for(r.setAttribute("title",i);o.hasChildNodes();)child=o.get("firstChild"),child.remove(),r.append(child);o.append(r);var s=this.div.get("offsetHeight"),l="t/collapsed";l=right_to_left()?"t/collapsed_rtl":"t/collapsed",this.div.hasClass("collapsed")?(this.icon=e.Node.create('<img src="'+M.util.image_url(l,"moodle")+'" alt="" />'),this.div.setStyle("height",o.get("offsetHeight")+"px")):this.icon=e.Node.create('<img src="'+M.util.image_url("t/expanded","moodle")+'" alt="" />'),r.append(this.icon);var a=new e.Anim({node:this.div,duration:.3,easing:e.Easing.easeBoth,to:{height:o.get("offsetHeight")},from:{height:s}});a.on("end",(function(){this.div.toggleClass("collapsed");var e="t/collapsed";e=right_to_left()?"t/collapsed_rtl":"t/collapsed",this.div.hasClass("collapsed")?this.icon.set("src",M.util.image_url(e,"moodle")):this.icon.set("src",M.util.image_url("t/expanded","moodle"))}),this),r.on("click",(function(e,t){e.preventDefault(),t.get("running")&&t.stop(),t.set("reverse",this.div.hasClass("collapsed")),this.userpref&&M.util.set_user_preference(this.userpref,!this.div.hasClass("collapsed")),t.run()}),this,a)},M.util.CollapsibleRegion.prototype.userpref=null,M.util.CollapsibleRegion.prototype.div=null,M.util.CollapsibleRegion.prototype.icon=null,M.util.set_user_preference=function(e,t){YUI().use("io",(function(n){var i=M.cfg.wwwroot+"/lib/ajax/setuserpref.php?sesskey="+M.cfg.sesskey+"&pref="+encodeURI(e)+"&value="+encodeURI(t),o={method:"get",on:{}};M.cfg.developerdebug&&(o.on.failure=function(t,n,i){alert("Error updating user preference '"+e+"' using ajax. Clicking this link will repeat the Ajax call that failed so you can see the error: ")}),n.io(i,o)}))},M.util.show_confirm_dialog=function(e,t){var n=e.target;e.preventDefault&&e.preventDefault(),YUI().use("moodle-core-notification-confirm",(function(e){var i=new M.core.confirm({width:"300px",center:!0,modal:!0,visible:!1,draggable:!1,title:M.util.get_string("confirmation","admin"),noLabel:M.util.get_string("cancel","moodle"),question:t.message});i.on("complete-yes",(function(i){if(t.callback){if(!e.Lang.isFunction(t.callback))return void e.log("Callbacks to show_confirm_dialog must now be functions. Please update your code to pass in a function instead.","warn","M.util.show_confirm_dialog");var o=i.target;e.Lang.isObject(t.scope)&&(o=t.scope);var r=t.callbackargs||[];t.callback.apply(o,r)}else{var s=null,l=null;if(n.test("a"))window.location=n.get("href");else if(null!==(s=n.ancestor("a")))window.location=s.get("href");else if(n.test("input")||n.test("button")){if(!(l=n.ancestor("form",!0)))return;n.get("name")&&n.get("value")&&(l.append('<input type="hidden" name="'+n.get("name")+'" value="'+n.get("value")+'">'),void 0!==M.core_formchangechecker&&M.core_formchangechecker.set_form_submitted()),l.submit()}else n.test("form")?(void 0!==M.core_formchangechecker&&M.core_formchangechecker.set_form_submitted(),n.submit()):e.log("Element of type "+n.get("tagName")+" is not supported by the M.util.show_confirm_dialog function. Use A, INPUT, BUTTON or FORM","warn","javascript-static")}}),this),t.cancellabel&&i.set("noLabel",t.cancellabel),t.continuelabel&&i.set("yesLabel",t.continuelabel),i.render().show()}))},M.util.init_maximised_embed=function(e,t){var n=e.one("#"+t);if(n){var i=function(t,n){if(e.Lang.isString(t)&&(t=e.one("#"+t)),t){var i=t.getStyle(n);return"auto"==i&&(i=t.getComputedStyle(n)),i=parseInt(i),isNaN(i)?0:i}return 0},o=function(){n.setStyle("display","none");var t=i("maincontent","width")-35;t>500?n.setStyle("width",t+"px"):n.setStyle("width","500px");var o=i("page-header","height"),r=i("page-footer","height"),s=parseInt(e.one("body").get("docHeight"))-r-o-100;s<400&&(s=400),n.setStyle("height",s+"px"),n.setStyle("display","")};o(),e.use("event-resize",(function(e){e.on("windowresize",(function(){o()}))}))}},M.util.init_frametop=function(e){e.all("a").each((function(e){e.set("target","_top")})),e.all("form").each((function(e){e.set("target","_top")}))},M.util.init_toggle_class_on_click=function(e,t,n,i,o){throw new Error("M.util.init_toggle_class_on_click can not be used any more. Please use jQuery instead.")},M.util.init_colour_picker=function(e,t,n){e.use("node","event-mouseenter",(function(){({box:null,input:null,image:null,preview:null,current:null,eventClick:null,eventMouseEnter:null,eventMouseLeave:null,eventMouseMove:null,width:300,height:100,factor:5,init:function(){this.input=e.one("#"+t),this.box=this.input.ancestor().one(".admin_colourpicker"),this.image=e.Node.create('<img alt="" class="colourdialogue" />'),this.image.setAttribute("src",M.util.image_url("i/colourpicker","moodle")),this.preview=e.Node.create('<div class="previewcolour"></div>'),this.preview.setStyle("width",this.height/2).setStyle("height",this.height/2).setStyle("backgroundColor",this.input.get("value")),this.current=e.Node.create('<div class="currentcolour"></div>'),this.current.setStyle("width",this.height/2).setStyle("height",this.height/2-1).setStyle("backgroundColor",this.input.get("value")),this.box.setContent("").append(this.image).append(this.preview).append(this.current),"object"==typeof n&&null!==n&&e.one("#"+t+"_preview").on("click",(function(t){if(e.Lang.isString(n.selector))e.all(n.selector).setStyle(n.style,this.input.get("value"));else for(var i in n.selector)e.all(n.selector[i]).setStyle(n.style,this.input.get("value"))}),this),this.eventClick=this.image.on("click",this.pickColour,this),this.eventMouseEnter=e.on("mouseenter",this.startFollow,this.image,this)},startFollow:function(t){this.eventMouseEnter.detach(),this.eventMouseLeave=e.on("mouseleave",this.endFollow,this.image,this),this.eventMouseMove=this.image.on("mousemove",(function(e){this.preview.setStyle("backgroundColor",this.determineColour(e))}),this)},endFollow:function(t){this.eventMouseMove.detach(),this.eventMouseLeave.detach(),this.eventMouseEnter=e.on("mouseenter",this.startFollow,this.image,this)},pickColour:function(e){var t=this.determineColour(e);this.input.set("value",t),this.current.setStyle("backgroundColor",t)},determineColour:function(e){for(var t=Math.floor(e.pageX-e.target.getX()),n=Math.floor(e.pageY-e.target.getY()),i=this.width,o=this.height,r=this.factor,s=[255,0,0],l=[[0,1,0],[-1,0,0],[0,0,1],[0,-1,0],[1,0,0],[0,0,-1]],a=l.length,u=Math.round(i/a),c=Math.round(o/2),d=0;d<i;d++){var h=l[Math.floor(d/u)];if(s[0]+=h[0]*r,s[1]+=h[1]*r,s[2]+=h[2]*r,t==d)break}var p=[s[0],s[1],s[2]];return n<c?(p[0]+=Math.floor((255-p[0])/c*(c-n)),p[1]+=Math.floor((255-p[1])/c*(c-n)),p[2]+=Math.floor((255-p[2])/c*(c-n))):n>c&&(p[0]=Math.floor((o-n)*(p[0]/c)),p[1]=Math.floor((o-n)*(p[1]/c)),p[2]=Math.floor((o-n)*(p[2]/c))),this.convert_rgb_to_hex(p)},convert_rgb_to_hex:function(e){for(var t="#",n="0123456789ABCDEF",i=0;i<3;i++){var o=Math.abs(e[i]);0==o||isNaN(o)?t+="00":t+=n.charAt((o-o%16)/16)+n.charAt(o%16)}return t}}).init()}))},M.util.init_block_hider=function(e,t){e.use("base","node",(function(e){var n;M.util.block_hider=M.util.block_hider||((n=function(){n.superclass.constructor.apply(this,arguments)}).prototype={initializer:function(t){this.set("block","#"+this.get("id"));var n,i,o=this.get("block").one(".title"),r=null;o&&(r=o.one(".block_action"))&&((n=e.Node.create("<img />").addClass("block-hider-hide").setAttrs({alt:t.tooltipVisible,src:this.get("iconVisible"),tabIndex:0,title:t.tooltipVisible})).on("keypress",this.updateStateKey,this,!0),n.on("click",this.updateState,this,!0),(i=e.Node.create("<img />").addClass("block-hider-show").setAttrs({alt:t.tooltipHidden,src:this.get("iconHidden"),tabIndex:0,title:t.tooltipHidden})).on("keypress",this.updateStateKey,this,!1),i.on("click",this.updateState,this,!1),r.insert(i,0).insert(n,0))},updateState:function(e,t){M.util.set_user_preference(this.get("preference"),t),t?(this.get("block").addClass("hidden"),this.get("block").one(".block-hider-show").focus()):(this.get("block").removeClass("hidden"),this.get("block").one(".block-hider-hide").focus())},updateStateKey:function(e,t){13==e.keyCode&&this.updateState(this,t)}},e.extend(n,e.Base,n.prototype,{NAME:"blockhider",ATTRS:{id:{},preference:{},iconVisible:{value:M.util.image_url("t/switch_minus","moodle")},iconHidden:{value:M.util.image_url("t/switch_plus","moodle")},block:{setter:function(t){return e.one(t)}}}}),n),new M.util.block_hider(t)}))},M.util.pending_js=[],M.util.complete_js=[],M.util.js_pending=function(e){return void 0!==e&&M.util.pending_js.push(e),M.util.pending_js.length},M.util.js_pending("init"),YUI.add("moodle-core-io",(function(e){e.on("io:start",(function(e){M.util.js_pending("io:"+e)})),e.on("io:end",(function(e){M.util.js_complete("io:"+e)}))}),"@VERSION@",{condition:{trigger:"io-base",when:"after"}}),M.util.js_complete=function(e){var t=Y.Array.indexOf(M.util.pending_js,e);return t>=0?M.util.complete_js.push(M.util.pending_js.splice(t,1)):window.console.log("Unable to locate key for js_complete call",e),M.util.pending_js.length},M.util.get_string=function(e,t,n){var i;if(M.cfg.developerdebug){void 0===M.util.get_string_yui_instance&&(M.util.get_string_yui_instance=new YUI({debug:!0}));var o=M.util.get_string_yui_instance}if(!M.str.hasOwnProperty(t)||!M.str[t].hasOwnProperty(e))return i="[["+e+","+t+"]]",M.cfg.developerdebug&&o.log("undefined string "+i,"warn","M.util.get_string"),i;if(i=M.str[t][e],void 0===n)return i;if("number"==typeof n||"string"==typeof n)return i=i.replace(/\{\$a\}/g,n);if("object"==typeof n){for(var r in n)if("number"==typeof n[r]||"string"==typeof n[r]){var s="{$a->"+r+"}";s=s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),s=new RegExp(s,"g"),i=i.replace(s,n[r])}else M.cfg.developerdebug&&o.log("invalid value type for $a->"+r,"warn","M.util.get_string");return i}return M.cfg.developerdebug&&o.log("incorrect placeholder type","warn","M.util.get_string"),i},M.util.focus_login_form=function(e){e.log("M.util.focus_login_form no longer does anything. Please use jquery instead.","warn","javascript-static.js")},M.util.focus_login_error=function(e){e.log("M.util.focus_login_error no longer does anything. Please use jquery instead.","warn","javascript-static.js")},M.util.add_lightbox=function(e,t){var n="i/loading_small",i="moodle";if(t.one(".lightbox"))return t.one(".lightbox");t.setStyle("position","relative");var o=e.Node.create("<img />").setAttrs({src:M.util.image_url(n,i)}).setStyles({position:"relative",top:"50%"}),r=e.Node.create("<div></div>").setStyles({opacity:".75",position:"absolute",width:"100%",height:"100%",top:0,left:0,backgroundColor:"white",textAlign:"center"}).setAttribute("class","lightbox").hide();return r.appendChild(o),t.append(r),r},M.util.add_spinner=function(e,t){var n="i/loading_small",i="moodle";if(t.one(".spinner"))return t.one(".spinner");var o=e.Node.create("<img />").setAttribute("src",M.util.image_url(n,i)).addClass("spinner").addClass("iconsmall").hide();return t.append(o),o},M.util.help_popups={setup:function(e){e.one("body").delegate("click",this.open_popup,"a.helplinkpopup",this)},open_popup:function(e){e.preventDefault();var t={name:"popup",url:e.target.ancestor("a",!0).getAttribute("href"),options:""};t.options=["height=600","width=800","top=0","left=0","menubar=0","location=0","scrollbars","resizable","toolbar","status","directories=0","fullscreen=0","dependent"].join(","),openpopup(e,t)}},M.core_custom_menu={init:function(e,t){var n=e.one("#"+t);n&&e.use("node-menunav",(function(e){n.removeClass("javascript-disabled"),n.plug(e.Plugin.NodeMenuNav)}))}},M.form=M.form||{},M.form.init_smartselect=function(){throw new Error("M.form.init_smartselect can not be used any more.")},M.util.init_skiplink=function(e){e.one(e.config.doc.body).delegate("click",(function(t){t.preventDefault(),t.stopPropagation();var n=e.one(this.getAttribute("href"));return n.setAttribute("tabindex","-1"),n.focus(),!0}),"a.skip")};